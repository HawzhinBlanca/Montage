/Users/hawzhin/.pyenv/versions/3.11.5/lib/python3.11/site-packages/transformers/utils/hub.py:111: FutureWarning: Using `TRANSFORMERS_CACHE` is deprecated and will be removed in v5 of Transformers. Use `HF_HOME` instead.
  warnings.warn(
2025-07-21 02:00:26,022 | INFO | src.config | âœ… OpenAI API key configured
2025-07-21 02:00:26,023 | INFO | src.config | âœ… Anthropic API key configured
2025-07-21 02:00:26,023 | INFO | src.config | âœ… Deepgram API key configured
2025-07-21 02:00:26,023 | INFO | src.config | âœ… Config loaded - MAX_COST_USD: $5.0
âœ… DaVinci Resolve API available
âœ… Connected to DaVinci Resolve
       Video Information       
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ Property    â”ƒ Value         â”ƒ
â”¡â”â”â”â”â”â”â”â”â”â”â”â”â”â•‡â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”©
â”‚ File        â”‚ test_3min.mp4 â”‚
â”‚ Duration    â”‚ 180.0 seconds â”‚
â”‚ Size        â”‚ 6.2 MB        â”‚
â”‚ Resolution  â”‚ 640x360       â”‚
â”‚ FPS         â”‚ 24.0          â”‚
â”‚ Video Codec â”‚ h264          â”‚
â”‚ Audio Codec â”‚ aac           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸš€ Starting MCP server...
Bottle v0.13.4 server starting up (using WSGIRefServer())...
Listening on http://localhost:7801/
Hit Ctrl-C to quit.

127.0.0.1 - - [21/Jul/2025 02:00:28] "GET /health HTTP/1.1" 200 20
ğŸš€ Starting MCP bridge server on localhost:7801
   DaVinci Resolve: Available
   Endpoints: /buildTimeline, /renderProxy, /status, /health
âœ… MCP server started successfully

ğŸ¬ Processing video in SMART mode
   Video: test_3min.mp4
ğŸ“ Output directory: /Users/hawzhin/Montage/output
2025-07-21 02:00:29,356 | INFO | faster_whisper | Processing audio with duration 03:00.001
2025-07-21 02:00:29,797 | INFO | faster_whisper | Detected language 'en' with probability 0.98
2025-07-21 02:01:09,294 | INFO | src.core.cost | API call to deepgram.nova-2: $0.0003 (total: $0.0003)
ğŸ¬ Analyzing video: test_3min.mp4
âœ… Faster-whisper transcribed 365 words
ğŸ“¤ Direct Deepgram upload (180.0s)
âŒ Deepgram failed: The write operation timed out
ğŸ”Š Using fallback speaker segmentation
ğŸ¤ Using simple VAD-based speaker segmentation...
âœ… VAD segmentation found 2 speaker turns
âœ… Video analysis complete: 365 words, 2 speaker turns
ğŸ“ Transcript: 365 words, 2 speaker turns
â ´ âœ… Video analysis complete
2025-07-21 02:01:10,865 | INFO | src.core.highlight_selector | ğŸ¯ Starting REAL highlight analysis (no fake AI)
2025-07-21 02:01:10,865 | INFO | src.core.highlight_selector | ğŸ“Š Performing real local content scoring...
2025-07-21 02:01:10,865 | INFO | src.core.highlight_selector | âš™ï¸ Running real local rule-based scoring...
2025-07-21 02:01:10,866 | INFO | src.core.highlight_selector | âœ… Real local scoring generated 2 highlights
2025-07-21 02:01:10,866 | INFO | src.core.highlight_selector | âœ… Local scoring found 2 potential highlights
2025-07-21 02:01:10,866 | INFO | src.core.highlight_selector | ğŸ§  Enhancing with real Gemini AI analysis...
2025-07-21 02:01:15,588 | INFO | src.core.highlight_selector | âœ… Gemini story analysis complete: 3 narrative beats identified
2025-07-21 02:01:15,588 | INFO | src.core.cost | API call to gemini.2-5-flash: $0.00001 (total: $0.00031)
2025-07-21 02:01:15,588 | INFO | src.core.highlight_selector | âœ… Gemini generated 3 story-based highlights
2025-07-21 02:01:15,589 | INFO | src.core.highlight_selector | ğŸ”— Combined into 5 final highlights
ğŸ”§ Converted 365 words to 81 segments
â ¼ âœ… Highlights selected
ğŸ¯ Selected 5 highlights (Cost: $0.000)
âœ… Created subtitle file: /Users/hawzhin/Montage/output/subtitles/subtitle_1.srt (3 lines)
âœ… Created subtitle file: /Users/hawzhin/Montage/output/subtitles/subtitle_2.srt (3 lines)
âœ… Created subtitle file: /Users/hawzhin/Montage/output/subtitles/subtitle_3.srt (3 lines)
âœ… Created subtitle file: /Users/hawzhin/Montage/output/subtitles/subtitle_4.srt (3 lines)
âœ… Created subtitle file: /Users/hawzhin/Montage/output/subtitles/subtitle_5.srt (4 lines)
ğŸ“„ Created 5 subtitle files
â ‹ âœ… Subtitles created
âœ… DaVinci timeline created
ğŸ¬ Starting DaVinci Resolve render: /Users/hawzhin/Montage/output/Montage_1753052475_timeline.mp4
...127.0.0.1 - - [21/Jul/2025 02:01:23] "POST /buildTimeline HTTP/1.1" 200 236

âœ… DaVinci Resolve render complete
âœ… Moved Montage_1753052475_timeline.mov to Montage_1753052475_timeline.mp4
ğŸ¬ Timeline created: davinci_resolve_rendered
â ¹ âœ… Timeline built

âœ… Pipeline Completed Successfully!

ğŸ¥ Output video created: 
/Users/hawzhin/Montage/output/Montage_1753052475_timeline.mp4
   Size: 77.21 MB

ğŸ“Š Analysis Summary:
   â€¢ Words transcribed: 365
   â€¢ Speaker turns: 2
   â€¢ Transcript length: 2437 characters

ğŸ¯ Highlights Summary:
   â€¢ Mode: SMART
   â€¢ Clips selected: 5
   â€¢ Total cost: $0.000
                            Top Highlights                            
â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”“
â”ƒ Clip â”ƒ Title                                    â”ƒ Duration â”ƒ Score â”ƒ
â”¡â”â”â”â”â”â”â•‡â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â•‡â”â”â”â”â”â”â”â”â”â”â•‡â”â”â”â”â”â”â”â”©
â”‚ 1    â”‚ a well -renowned geneticist, and cert... â”‚ 10.4s    â”‚ 10.0  â”‚
â”‚ 2    â”‚ planet. My co -host is Honorable         â”‚ 11.2s    â”‚ 10.0  â”‚
â”‚ 3    â”‚ of Australia, and again, in my           â”‚ 10.0s    â”‚ 10.0  â”‚
â”‚ 4    â”‚ It's something that is causing hundre... â”‚ 13.1s    â”‚ 8.4   â”‚
â”‚ 5    â”‚ And David, in terms of changing          â”‚ 15.4s    â”‚ 6.5   â”‚
â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ¬ Timeline Summary:
   â€¢ Method: davinci_resolve_rendered
   â€¢ Clips added: 5
   â€¢ Output: /Users/hawzhin/Montage/output/Montage_1753052475_timeline.mp4

ğŸ’¾ Full plan saved to: montage_plan_1753052483.json
