/Users/hawzhin/.pyenv/versions/3.11.5/lib/python3.11/site-packages/transformers/utils/hub.py:111: FutureWarning: Using `TRANSFORMERS_CACHE` is deprecated and will be removed in v5 of Transformers. Use `HF_HOME` instead.
  warnings.warn(
2025-07-21 01:08:41,900 | INFO | src.config | âœ… OpenAI API key configured
2025-07-21 01:08:41,900 | INFO | src.config | âœ… Anthropic API key configured
2025-07-21 01:08:41,901 | INFO | src.config | âœ… Deepgram API key configured
2025-07-21 01:08:41,901 | INFO | src.config | âœ… Config loaded - MAX_COST_USD: $5.0
âœ… DaVinci Resolve API available
âœ… Connected to DaVinci Resolve
       Video Information        
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ Property    â”ƒ Value          â”ƒ
â”¡â”â”â”â”â”â”â”â”â”â”â”â”â”â•‡â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”©
â”‚ File        â”‚ test_video.mp4 â”‚
â”‚ Duration    â”‚ 2595.7 seconds â”‚
â”‚ Size        â”‚ 83.4 MB        â”‚
â”‚ Resolution  â”‚ 640x360        â”‚
â”‚ FPS         â”‚ 24.0           â”‚
â”‚ Video Codec â”‚ h264           â”‚
â”‚ Audio Codec â”‚ aac            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸš€ Starting MCP server...
Bottle v0.13.4 server starting up (using WSGIRefServer())...
Listening on http://localhost:7801/
Hit Ctrl-C to quit.

127.0.0.1 - - [21/Jul/2025 01:08:44] "GET /health HTTP/1.1" 200 20
ğŸš€ Starting MCP bridge server on localhost:7801
   DaVinci Resolve: Available
   Endpoints: /buildTimeline, /renderProxy, /status, /health
âœ… MCP server started successfully

ğŸ¬ Processing video in SMART mode
   Video: test_video.mp4
ğŸ“ Output directory: /Users/hawzhin/Montage/output
2025-07-21 01:08:47,033 | INFO | faster_whisper | Processing audio with duration 43:15.712
2025-07-21 01:08:48,255 | INFO | faster_whisper | Detected language 'en' with probability 0.97
2025-07-21 01:11:35,723 | INFO | httpx | HTTP Request: POST https://api.deepgram.com/v1/listen?diarize=true&language=en-US&model=nova-2&punctuate=true&smart_format=true&utterances=true "HTTP/1.1 200 OK"
2025-07-21 01:11:41,010 | INFO | httpx | HTTP Request: POST https://api.deepgram.com/v1/listen?diarize=true&language=en-US&model=nova-2&punctuate=true&smart_format=true&utterances=true "HTTP/1.1 200 OK"
2025-07-21 01:11:47,295 | INFO | httpx | HTTP Request: POST https://api.deepgram.com/v1/listen?diarize=true&language=en-US&model=nova-2&punctuate=true&smart_format=true&utterances=true "HTTP/1.1 200 OK"
2025-07-21 01:11:52,930 | INFO | httpx | HTTP Request: POST https://api.deepgram.com/v1/listen?diarize=true&language=en-US&model=nova-2&punctuate=true&smart_format=true&utterances=true "HTTP/1.1 200 OK"
2025-07-21 01:12:00,169 | INFO | httpx | HTTP Request: POST https://api.deepgram.com/v1/listen?diarize=true&language=en-US&model=nova-2&punctuate=true&smart_format=true&utterances=true "HTTP/1.1 200 OK"
2025-07-21 01:12:05,985 | INFO | httpx | HTTP Request: POST https://api.deepgram.com/v1/listen?diarize=true&language=en-US&model=nova-2&punctuate=true&smart_format=true&utterances=true "HTTP/1.1 200 OK"
2025-07-21 01:12:39,109 | INFO | httpx | HTTP Request: POST https://api.deepgram.com/v1/listen?diarize=true&language=en-US&model=nova-2&punctuate=true&smart_format=true&utterances=true "HTTP/1.1 200 OK"
2025-07-21 01:12:44,664 | INFO | httpx | HTTP Request: POST https://api.deepgram.com/v1/listen?diarize=true&language=en-US&model=nova-2&punctuate=true&smart_format=true&utterances=true "HTTP/1.1 200 OK"
2025-07-21 01:12:48,983 | INFO | httpx | HTTP Request: POST https://api.deepgram.com/v1/listen?diarize=true&language=en-US&model=nova-2&punctuate=true&smart_format=true&utterances=true "HTTP/1.1 200 OK"
2025-07-21 01:12:49,060 | INFO | src.core.cost | API call to deepgram.nova-2: $0.0003 (total: $0.0003)
ğŸ¬ Analyzing video: /Users/hawzhin/Montage/test_video.mp4
âœ… Faster-whisper transcribed 6831 words
ğŸ”„ Large file (2595.7s) - chunking for Deepgram
ğŸ“‹ Processing 9 chunks of 300s each
ğŸ”„ Chunk 1/9: 0.0s - 300.0s
âœ… Chunk 1 completed: 710 total words
ğŸ”„ Chunk 2/9: 300.0s - 600.0s
âœ… Chunk 2 completed: 1554 total words
ğŸ”„ Chunk 3/9: 600.0s - 900.0s
âœ… Chunk 3 completed: 2356 total words
ğŸ”„ Chunk 4/9: 900.0s - 1200.0s
âœ… Chunk 4 completed: 3196 total words
ğŸ”„ Chunk 5/9: 1200.0s - 1500.0s
âœ… Chunk 5 completed: 4048 total words
ğŸ”„ Chunk 6/9: 1500.0s - 1800.0s
âœ… Chunk 6 completed: 4863 total words
ğŸ”„ Chunk 7/9: 1800.0s - 2100.0s
âœ… Chunk 7 completed: 5729 total words
ğŸ”„ Chunk 8/9: 2100.0s - 2400.0s
âœ… Chunk 8 completed: 6605 total words
ğŸ”„ Chunk 9/9: 2400.0s - 2595.7s
âœ… Chunk 9 completed: 7108 total words
âœ… Deepgram chunked transcription completed: 7108 words
ğŸ”§ Removed 218 duplicate words
âœ… ROVER merged 6831 + 6992 â†’ 6961 words
ğŸ¤ Using Deepgram's speaker diarization
âœ… Deepgram diarization found 1197 speaker turns
âœ… Video analysis complete: 6961 words, 1197 speaker turns
ğŸ“ Transcript: 6961 words, 1197 speaker turns
â  âœ… Video analysis complete
2025-07-21 01:13:05,914 | INFO | src.core.highlight_selector | ğŸ¯ Starting REAL highlight analysis (no fake AI)
2025-07-21 01:13:05,914 | INFO | src.core.highlight_selector | ğŸ“Š Performing real local content scoring...
2025-07-21 01:13:05,914 | INFO | src.core.highlight_selector | âš™ï¸ Running real local rule-based scoring...
2025-07-21 01:13:05,919 | INFO | src.core.highlight_selector | âœ… Real local scoring generated 8 highlights
2025-07-21 01:13:05,919 | INFO | src.core.highlight_selector | âœ… Local scoring found 8 potential highlights
2025-07-21 01:13:05,919 | INFO | src.core.highlight_selector | ğŸ§  Enhancing with real Gemini AI analysis...
2025-07-21 01:13:10,585 | INFO | src.core.highlight_selector | âœ… Gemini story analysis complete: 3 narrative beats identified
2025-07-21 01:13:10,585 | INFO | src.core.cost | API call to gemini.2-5-flash: $0.00001 (total: $0.00031)
2025-07-21 01:13:10,585 | INFO | src.core.highlight_selector | âœ… Gemini generated 3 story-based highlights
2025-07-21 01:13:10,585 | INFO | src.core.highlight_selector | ğŸ”— Combined into 6 final highlights
ğŸ”§ Converted 6961 words to 1540 segments
â ‡ âœ… Highlights selected
ğŸ¯ Selected 6 highlights (Cost: $0.000)
âœ… Created subtitle file: /Users/hawzhin/Montage/output/subtitles/subtitle_1.srt (2 lines)
âœ… Created subtitle file: /Users/hawzhin/Montage/output/subtitles/subtitle_2.srt (3 lines)
âœ… Created subtitle file: /Users/hawzhin/Montage/output/subtitles/subtitle_3.srt (3 lines)
âœ… Created subtitle file: /Users/hawzhin/Montage/output/subtitles/subtitle_4.srt (3 lines)
âœ… Created subtitle file: /Users/hawzhin/Montage/output/subtitles/subtitle_5.srt (3 lines)
âœ… Created subtitle file: /Users/hawzhin/Montage/output/subtitles/subtitle_6.srt (2 lines)
ğŸ“„ Created 6 subtitle files
â ‹ âœ… Subtitles created
âœ… DaVinci timeline created
ğŸ¬ Starting DaVinci Resolve render: /Users/hawzhin/Montage/output/Montage_1753049590_timeline.mp4
...127.0.0.1 - - [21/Jul/2025 01:13:18] "POST /buildTimeline HTTP/1.1" 200 236

âœ… DaVinci Resolve render complete
âœ… Moved Montage_1753049590_timeline.mov to Montage_1753049590_timeline.mp4
ğŸ¬ Timeline created: davinci_resolve_rendered
â ¹ âœ… Timeline built

âœ… Pipeline Completed Successfully!

ğŸ¥ Output video created: 
/Users/hawzhin/Montage/output/Montage_1753049590_timeline.mp4
   Size: 66.65 MB

ğŸ“Š Analysis Summary:
   â€¢ Words transcribed: 6961
   â€¢ Speaker turns: 1197
   â€¢ Transcript length: 39987 characters

ğŸ¯ Highlights Summary:
   â€¢ Mode: SMART
   â€¢ Clips selected: 6
   â€¢ Total cost: $0.000
                            Top Highlights                            
â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”“
â”ƒ Clip â”ƒ Title                                    â”ƒ Duration â”ƒ Score â”ƒ
â”¡â”â”â”â”â”â”â•‡â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â•‡â”â”â”â”â”â”â”â”â”â”â•‡â”â”â”â”â”â”â”â”©
â”‚ 1    â”‚ well my question, i guess, is            â”‚ 5.4s     â”‚ 10.9  â”‚
â”‚ 2    â”‚ and so i said said, alright              â”‚ 9.3s     â”‚ 11.1  â”‚
â”‚ 3    â”‚ and really, the only true evidence       â”‚ 9.5s     â”‚ 11.1  â”‚
â”‚ 4    â”‚ For example, there's one called sperm... â”‚ 13.1s    â”‚ 11.5  â”‚
â”‚ 5    â”‚ and it's really quite an amazing         â”‚ 10.2s    â”‚ 11.2  â”‚
â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ¬ Timeline Summary:
   â€¢ Method: davinci_resolve_rendered
   â€¢ Clips added: 6
   â€¢ Output: /Users/hawzhin/Montage/output/Montage_1753049590_timeline.mp4

ğŸ’¾ Full plan saved to: montage_plan_1753049598.json
