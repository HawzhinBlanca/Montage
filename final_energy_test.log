/Users/hawzhin/.pyenv/versions/3.11.5/lib/python3.11/site-packages/transformers/utils/hub.py:111: FutureWarning: Using `TRANSFORMERS_CACHE` is deprecated and will be removed in v5 of Transformers. Use `HF_HOME` instead.
  warnings.warn(
2025-07-21 02:09:13,158 | INFO | src.config | âœ… OpenAI API key configured
2025-07-21 02:09:13,159 | INFO | src.config | âœ… Anthropic API key configured
2025-07-21 02:09:13,159 | INFO | src.config | âœ… Deepgram API key configured
2025-07-21 02:09:13,159 | INFO | src.config | âœ… Config loaded - MAX_COST_USD: $5.0
âœ… DaVinci Resolve API available
âœ… Connected to DaVinci Resolve
       Video Information        
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ Property    â”ƒ Value          â”ƒ
â”¡â”â”â”â”â”â”â”â”â”â”â”â”â”â•‡â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”©
â”‚ File        â”‚ quick_test.mp4 â”‚
â”‚ Duration    â”‚ 60.0 seconds   â”‚
â”‚ Size        â”‚ 2.3 MB         â”‚
â”‚ Resolution  â”‚ 640x360        â”‚
â”‚ FPS         â”‚ 24.0           â”‚
â”‚ Video Codec â”‚ h264           â”‚
â”‚ Audio Codec â”‚ aac            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸš€ Starting MCP server...
Bottle v0.13.4 server starting up (using WSGIRefServer())...
Listening on http://localhost:7801/
Hit Ctrl-C to quit.

127.0.0.1 - - [21/Jul/2025 02:09:15] "GET /health HTTP/1.1" 200 20
ğŸš€ Starting MCP bridge server on localhost:7801
   DaVinci Resolve: Available
   Endpoints: /buildTimeline, /renderProxy, /status, /health
âœ… MCP server started successfully

ğŸ¬ Processing video in SMART mode
   Video: quick_test.mp4
ğŸ“ Output directory: /Users/hawzhin/Montage/output
2025-07-21 02:09:16,369 | INFO | faster_whisper | Processing audio with duration 01:00.000
2025-07-21 02:09:16,766 | INFO | faster_whisper | Detected language 'en' with probability 0.98
2025-07-21 02:09:21,901 | INFO | httpx | HTTP Request: POST https://api.deepgram.com/v1/listen?diarize=true&language=en-US&model=nova-2&punctuate=true&smart_format=true&utterances=true "HTTP/1.1 200 OK"
2025-07-21 02:09:21,926 | INFO | src.core.cost | API call to deepgram.nova-2: $0.0003 (total: $0.0003)
ğŸ¬ Analyzing video: quick_test.mp4
âœ… Faster-whisper transcribed 108 words
ğŸ“¤ Direct Deepgram upload (60.0s)
âœ… Deepgram transcribed 108 words
ğŸ”§ Removed 2 duplicate words
âœ… ROVER merged 108 + 106 â†’ 110 words
ğŸ¤ Using Deepgram's speaker diarization with intelligent merging
ğŸ” Raw Deepgram turns: 1 (before intelligent merging)
âœ… Intelligent diarization: 1 speaker turns (reduced from 1)
âœ… Video analysis complete: 110 words, 1 speaker turns
ğŸ“ Transcript: 110 words, 1 speaker turns
â ‹ âœ… Video analysis complete
2025-07-21 02:09:22,365 | INFO | src.core.highlight_selector | ğŸ¯ Starting REAL highlight analysis (no fake AI)
2025-07-21 02:09:22,365 | INFO | src.core.highlight_selector | ğŸ“Š Performing real local content scoring...
2025-07-21 02:09:22,365 | INFO | src.core.highlight_selector | âš™ï¸ Running real local rule-based scoring...
2025-07-21 02:09:22,366 | INFO | src.core.highlight_selector | âœ… Real local scoring generated 0 highlights
2025-07-21 02:09:22,366 | WARNING | src.core.highlight_selector | No highlights found with local scoring
ğŸ”§ Converted 110 words to 23 segments
â ´ âœ… Highlights selected
ğŸ¯ Selected 0 highlights (Cost: $0.000)
âš ï¸  No highlights selected - check transcript quality
   Using first 30 seconds as fallback
âœ… Created subtitle file: /Users/hawzhin/Montage/output/subtitles/subtitle_1.srt (4 lines)
ğŸ“„ Created 1 subtitle files
â ‹ âœ… Subtitles created
âœ… DaVinci timeline created
ğŸ¬ Starting DaVinci Resolve render: /Users/hawzhin/Montage/output/Montage_1753052962_timeline.mp4
..127.0.0.1 - - [21/Jul/2025 02:09:28] "POST /buildTimeline HTTP/1.1" 200 236

âœ… DaVinci Resolve render complete
âœ… Moved Montage_1753052962_timeline.mov to Montage_1753052962_timeline.mp4
ğŸ¬ Timeline created: davinci_resolve_rendered
â ¦ âœ… Timeline built

âœ… Pipeline Completed Successfully!

ğŸ¥ Output video created: 
/Users/hawzhin/Montage/output/Montage_1753052962_timeline.mp4
   Size: 32.89 MB

ğŸ“Š Analysis Summary:
   â€¢ Words transcribed: 110
   â€¢ Speaker turns: 1
   â€¢ Transcript length: 644 characters

ğŸ¯ Highlights Summary:
   â€¢ Mode: SMART
   â€¢ Clips selected: 1
   â€¢ Total cost: $0.000
              Top Highlights              
â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”“
â”ƒ Clip â”ƒ Title        â”ƒ Duration â”ƒ Score â”ƒ
â”¡â”â”â”â”â”â”â•‡â”â”â”â”â”â”â”â”â”â”â”â”â”â”â•‡â”â”â”â”â”â”â”â”â”â”â•‡â”â”â”â”â”â”â”â”©
â”‚ 1    â”‚ Full Content â”‚ 30.0s    â”‚ 1.0   â”‚
â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ¬ Timeline Summary:
   â€¢ Method: davinci_resolve_rendered
   â€¢ Clips added: 1
   â€¢ Output: /Users/hawzhin/Montage/output/Montage_1753052962_timeline.mp4

ğŸ’¾ Full plan saved to: montage_plan_1753052968.json
